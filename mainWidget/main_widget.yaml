uid: main_widget
tags: []
props:
  parameters:
    - default: Somewhere
      description: Name for your weather location
      label: Weather Location
      name: locationTitle
      required: false
      type: TEXT
    - context: item
      description: Name of scenes group item
      label: Scenes Group
      name: scenesGroup
      required: false
      type: TEXT
    - description: Hide Security menu
      label: hide
      name: hideSecurity
      required: false
      type: BOOLEAN
      groupName: security
  parameterGroups:
    - name: security
      label: Security Configuration Parameters
timestamp: Feb 6, 2023, 10:41:52 AM
component: f7-block
config:
  style:
    background: =(themeOptions.dark=="light") ? ("white"):("black")
    height: 100vh
    margin: 0
    padding: 0
    width: 100%
  stylesheet: >
    
    .container { 
      height: 100%;
      display: grid; 
      grid-template-columns: 100%; 
      grid-template-rows: min-content 1fr auto; 
      gap: 10px 0px;
      margin: 0 !important;
      padding: calc(15px + var(--f7-safe-area-top)) 0px var(--f7-safe-area-bottom) 0px !important;
      grid-template-areas: 
        "header"
        "main"
        "footer";
      }   
    .header {   
      grid-area: header;
      
      margin: 0;
      overflow: hidden;
      }          
    .main {
      grid-area: main;
      overflow-y: scroll;
      overflow-x: hidden;
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
      } 
    .main::-webkit-scrollbar {
        display: none;
      } 
    .footer {
      grid-area: footer; 
      overflow: hidden;
      } 
    .mainWidget {
      
      --f7-theme-color: #FBBF02;
      --f7-theme-color-rgb: 251, 191, 2;
      /*toggles*/
      --f7-toggle-active-color: #545454;
      --f7-toggle-inactive-color: #B9B9B9;

      /*Custom Vars*/
      /*--tobNavbar Buttons*/
      --mW-topNavbar-button-color-selected: #262626;
      --mW-topNavbar-button-color-unselected: #B9B9B9;
      --mW-topNavbar-button-underline-color: var(--f7-theme-color);
      /*--tobNavbar Swiper*/
      --mW-topNavbar-swiper-navigation-color: #898989;
      --mW-topNavbar-swiper-navigation-size: 20px;
      }      
    .mainWidget .topNavbar .button {
        --f7-button-hover-bg-color: transparent;
        --f7-button-pressed-bg-color: rgba(var(--f7-theme-color-rgb), .07);
        --f7-button-text-color: var(--mW-topNavbar-button-color-unselected);
      }
    .mainWidget .topNavbar .selected_menu_item {
      color: var(--mW-topNavbar-button-color);
      text-decoration-color: var(--mW-topNavbar-button-underline-color) !important;
      text-decoration: underline;
      text-underline-offset: 5px;
      } 
    .mainWidget .topNavbar .unselected_menu_item {
      color: var(--mW-topNavbar-button-color-unselected);
      font-weight: 300;
      }    
slots:
  default:
    - component: f7-block
      config:
        class:
          - container
          - mainWidget
      slots:
        default:
          - component: f7-block
            config:
              class:
                - no-padding
                - header
                - topNavbar
            slots:
              default:
                - component: f7-row
                  config:
                    style:
                      height: auto
                      justify-content: center
                      margin-left: 2%
                      margin-right: 2%
                  slots:
                    default:
                      - component: oh-repeater
                        config:
                          for: baseMenu
                          fragment: true
                          in:
                            - name: Home
                            - name: Floors
                            - name: Rooms
                          sourceType: array
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  selectSection: ="SECTION" + loop.baseMenu_idx
                                class:
                                  - '=vars.objVar ? "" : "unselected_menu_item"'
                                  - '=vars.objVar.selectSection=="SECTION" + loop.baseMenu_idx ? "selected_menu_item" : "unselected_menu_item"'
                                large: true
                                style:
                                  font-size: 24px
                                  width: auto
                                text: =loop.baseMenu.name
                - component: f7-row
                  config:
                    style:
                      width: 100%
                    visible: '=vars.objVar ? (vars.objVar.selectSection=="SECTION1") ? true : false : false'
                  slots:
                    default:
                      - component: f7-swiper
                        config:
                          navigation: true
                          params:
                            breakpoints:
                              "0":
                                slidesPerView: 1
                                spaceBetween: 0
                              "240":
                                slidesPerView: 1
                                spaceBetween: 0
                              "320":
                                slidesPerView: 2
                                slidesPerGroup: 2
                                spaceBetween: 0
                              "480":
                                slidesPerView: 3
                                slidesPerGroup: 3
                                spaceBetween: 0
                              "640":
                                slidesPerView: 4
                                slidesPerGroup: 4
                                spaceBetween: 0
                              "940":
                                slidesPerView: 5
                                slidesPerGroup: 5
                                spaceBetween: 0
                              "1400":
                                slidesPerView: 6
                                slidesPerGroup: 6
                                spaceBetween: 0
                              "1800":
                                slidesPerView: 8
                                slidesPerGroup: 8
                                spaceBetween: 0
                            centerInsufficientSlides: true
                            grabCursor: true
                            keyboard: true
                            mousewheel: true
                            observeSlideChildren: true
                            observer: true
                            runCallbacksOnInit: true
                            updateOnWindowResize: true
                            watchOverflow: true
                          style:
                            --swiper-navigation-color: var(--mW-topNavbar-swiper-navigation-color)
                            --swiper-navigation-size: var(--mW-topNavbar-swiper-navigation-size)
                            width: 100%
                        slots:
                          default:
                            - component: oh-repeater
                              config:
                                fetchMetadata: metadata,semantics,widgetOrder
                                filter: (loop.floorArray.metadata) && (loop.floorArray.metadata.semantics.value).includes("Floor")
                                for: floorArray
                                fragment: true
                                itemTags: ","
                                sourceType: itemsWithTags
                              slots:
                                default:
                                  - component: f7-swiper-slide
                                    config:
                                      expandable: true
                                      style:
                                        border-radius: 5px
                                    slots:
                                      default:
                                        - component: oh-button
                                          config:
                                            action: variable
                                            actionVariable: objVar
                                            actionVariableValue:
                                              floor: =loop.floorArray.name
                                              selectSection: SECTION2
                                            class:
                                              - '=vars.objVar ? "" : "unselected_menu_item"'
                                              - '=(vars.objVar.floor == loop.floorArray.name) ? "selected_menu_item" : "unselected_menu_item"'
                                            large: true
                                            style:
                                              font-size: 16px
                                              width: auto
                                            text: =loop.floorArray.label
                - component: f7-row
                  config:
                    style:
                      width: 100%
                    visible: '=!vars.objVar ? false : (vars.objVar.selectSection=="SECTION2" && !vars.objVar.floor) ? true : false'
                  slots:
                    default:
                      - component: f7-swiper
                        config:
                          navigation: true
                          params:
                            breakpoints:
                              "0":
                                slidesPerView: 1
                                spaceBetween: 0
                              "240":
                                slidesPerView: 1
                                spaceBetween: 0
                              "320":
                                slidesPerView: 2
                                slidesPerGroup: 2
                                spaceBetween: 0
                              "480":
                                slidesPerView: 3
                                slidesPerGroup: 3
                                spaceBetween: 0
                              "640":
                                slidesPerView: 4
                                slidesPerGroup: 4
                                spaceBetween: 0
                              "940":
                                slidesPerView: 5
                                slidesPerGroup: 5
                                spaceBetween: 0
                              "1400":
                                slidesPerView: 6
                                slidesPerGroup: 6
                                spaceBetween: 0
                              "1800":
                                slidesPerView: 8
                                slidesPerGroup: 8
                                spaceBetween: 0
                            centerInsufficientSlides: true
                            grabCursor: true
                            keyboard: true
                            mousewheel: true
                            observeSlideChildren: true
                            observer: true
                            observeParents: true
                            runCallbacksOnInit: true
                            updateOnWindowResize: true
                            watchOverflow: true
                            init: true
                          style:
                            --swiper-navigation-color: var(--mW-topNavbar-swiper-navigation-color)
                            --swiper-navigation-size: var(--mW-topNavbar-swiper-navigation-size)
                            width: 100%
                        slots:
                          default:
                            - component: oh-repeater
                              config:
                                fetchMetadata: metadata,semantics,widgetOrder
                                filter: (loop.roomArray.metadata) && ((loop.roomArray.metadata.semantics.value).includes("Room")  || (loop.roomArray.metadata.semantics.value).includes("Corridor")) && (loop.roomArray.metadata.semantics.config.hasLocation == vars.objVar.floor)
                                for: roomArray
                                fragment: true
                                itemTags: ","
                                sourceType: itemsWithTags
                              slots:
                                default:
                                  - component: f7-swiper-slide
                                    config:
                                      style:
                                        border-radius: 5px
                                    slots:
                                      default:
                                        - component: oh-button
                                          config:
                                            action: variable
                                            actionVariable: objVar
                                            actionVariableValue:
                                              floor: =vars.objVar.floor
                                              room: =loop.roomArray.name
                                              selectSection: =vars.objVar.selectSection
                                            class:
                                              - '=vars.objVar ? "" : "unselected_menu_item"'
                                              - '=(vars.objVar.room == loop.roomArray.name) ? "selected_menu_item" : "unselected_menu_item"'
                                            style:
                                              font-size: 16px
                                              width: auto
                                            text: =loop.roomArray.label
                - component: f7-row
                  config:
                    style:
                      width: 100%
                    visible: '=vars.objVar ? (vars.objVar.selectSection=="SECTION2" && vars.objVar.floor ) ? true : false : false'
                  slots:
                    default:
                      - component: f7-swiper
                        config:
                          navigation: true
                          params:
                            breakpoints:
                              "0":
                                slidesPerView: 1
                                spaceBetween: 0
                              "240":
                                slidesPerView: 1
                                spaceBetween: 0
                              "320":
                                slidesPerView: 2
                                slidesPerGroup: 2
                                spaceBetween: 0
                              "480":
                                slidesPerView: 3
                                slidesPerGroup: 3
                                spaceBetween: 0
                              "640":
                                slidesPerView: 4
                                slidesPerGroup: 4
                                spaceBetween: 0
                              "940":
                                slidesPerView: 5
                                slidesPerGroup: 5
                                spaceBetween: 0
                              "1400":
                                slidesPerView: 6
                                slidesPerGroup: 6
                                spaceBetween: 0
                              "1800":
                                slidesPerView: 8
                                slidesPerGroup: 8
                                spaceBetween: 0
                            centerInsufficientSlides: true
                            grabCursor: true
                            keyboard: true
                            mousewheel: true
                            observeSlideChildren: true
                            observer: true
                            runCallbacksOnInit: true
                            updateOnWindowResize: true
                            watchOverflow: true
                          style:
                            --swiper-navigation-color: var(--mW-topNavbar-swiper-navigation-color)
                            --swiper-navigation-size: var(--mW-topNavbar-swiper-navigation-size)
                            width: 100%
                        slots:
                          default:
                            - component: oh-repeater
                              config:
                                fetchMetadata: metadata,semantics
                                filter: (loop.roomArray.metadata) && ( (loop.roomArray.metadata.semantics.value).includes("Room") || (loop.roomArray.metadata.semantics.value).includes("Corridor") )
                                for: roomArray
                                fragment: true
                                groupItem: =vars.objVar.floor
                                sourceType: itemsInGroup
                              slots:
                                default:
                                  - component: f7-swiper-slide
                                    config:
                                      style:
                                        border-radius: 5px
                                    slots:
                                      default:
                                        - component: oh-button
                                          config:
                                            action: variable
                                            actionVariable: objVar
                                            actionVariableValue:
                                              floor: =vars.objVar.floor
                                              room: =loop.roomArray.name
                                              selectSection: =vars.objVar.selectSection
                                            class: '=(vars.objVar.room == loop.roomArray.name) ? "selected_menu_item" : "unselected_menu_item"'
                                            text: =loop.roomArray.label
          - component: f7-block
            config:
              class:
                - main
                - no-margin
                - no-padding
            slots:
              default:
                - component: widget:main_widget_Home_Card
                  config:
                    locationTitle: =props.locationTitle
                    referencePIN: =props.referencePIN
                    scenesGroup: =props.scenesGroup
                    securityGroup: =props.securityGroup
                    securityMode: =props.securityMode
                - component: widget:main_widget_FloorsAndRooms
          - component: f7-block
            config:
              class:
                - no-margin
                - no-padding
                - footer
              style:
                width: 100%
              visible: '=vars.objVar ? (vars.objVar.selectSection=="SECTION0") ? true : false : false'
            slots:
              default:
                - component: f7-row
                  config:
                    class:
                      - display-flex
                    style:
                      flex-direction: row
                      height: 100%
                      justify-content: space-around
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Security" ? undefined : "Security"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Security" ? "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 100%
                                      icon: iconify:carbon:security
                                  - component: Label
                                    config:
                                      text: Security
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Scenes" ? undefined : "Scenes"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Scenes" ? "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 100%
                                      icon: iconify:heroicons:rectangle-stack
                                  - component: Label
                                    config:
                                      text: Scenes
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Appliances" ? undefined : "Appliances"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Appliances" ?  "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 80%
                                      icon: iconify:bi:plugin
                                  - component: Label
                                    config:
                                      text: Appliances
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Energy" ? undefined : "Energy"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Energy" ?  "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 80%
                                      icon: iconify:simple-line-icons:energy
                                  - component: Label
                                    config:
                                      text: Energy
          - component: f7-block
            config:
              class:
                - no-margin
                - no-padding
                - footer
              style:
                width: 100%
              visible: '=vars.objVar ? (vars.objVar.selectSection=="SECTION0") ? false : true : false'
            slots:
              default:
                - component: f7-row
                  config:
                    class:
                      - display-flex
                    style:
                      flex-direction: row
                      height: 100%
                      justify-content: space-around
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Lights" ? undefined : "Lights"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Lights" ? "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 100%
                                      icon: iconify:clarity:lightbulb-line
                                  - component: Label
                                    config:
                                      text: Lights
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Rollers" ? undefined : "Rollers"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Rollers" ? "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 100%
                                      icon: iconify:mdi:window-shutter
                                  - component: Label
                                    config:
                                      text: Rollers
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Climate" ? undefined : "Climate"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Climate" ?  "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 80%
                                      icon: iconify:ph:thermometer-hot-light
                                  - component: Label
                                    config:
                                      text: Climate
                      - component: f7-col
                        config:
                          style:
                            height: 70px
                            min-width: 50px
                        slots:
                          default:
                            - component: oh-link
                              config:
                                action: variable
                                actionVariable: objVar
                                actionVariableValue:
                                  floor: =vars.objVar.floor
                                  room: =vars.objVar.room
                                  selectSection: =vars.objVar.selectSection
                                  selectThing: '=vars.objVar.selectThing == "Appliances" ? undefined : "Appliances"'
                                class:
                                  - padding-half
                                style:
                                  color: '=vars.objVar.selectThing == "Appliances" ?  "var(--f7-toggle-active-color)" : "var(--f7-toggle-inactive-color)"'
                                  display: flex
                                  flex-direction: column
                                  height: 100%
                              slots:
                                default:
                                  - component: oh-icon
                                    config:
                                      height: 80%
                                      icon: iconify:bi:plugin
                                  - component: Label
                                    config:
                                      text: Appliances
